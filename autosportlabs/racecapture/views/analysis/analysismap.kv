#
# Race Capture App
#
# Copyright (C) 2014-2016 Autosport Labs
#
# This file is part of the Race Capture App
#
# This is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This software is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
# See the GNU General Public License for more details. You should
#have received a copy of the GNU General Public License along with
#this code. If not, see <http://www.gnu.org/licenses/>.

<ColorLegend>:
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: 0.45
    BoxLayout:
        canvas.before:
            Color:
                rgba: root.bar_color
            Rectangle:
                pos: self.pos
                size: self.size
        id: color_bar
        size_hint_y: 0.1
    BoxLayout:
        size_hint_y: 0.45

<GradientLegend>:
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: 0.35
    GradientBox:
        size_hint_y: 0.30
        color: root.color
        id: gradient
    BoxLayout:
        size_hint_y: 0.35

<LapLegend>:
    orientation: 'horizontal'
    spacing: sp(5)
    FieldLabel:
        id: lap
        size_hint_x: 0.7
        halign: 'right'
        text: '{} :: {}'.format(root.lap, root.session)
    ColorLegend:
        id: legend
        size_hint_x: 0.3
        bar_color: root.color

<GradientLapLegend>:
    orientation: 'horizontal'
    spacing: sp(5)
    FieldLabel:
        id: lap
        size_hint_x: 0.4
        halign: 'right'
        text: '{} :: {}'.format(root.lap, root.session)
    FieldLabel:
        id: min_value
        text: str(root.min_value)
        size_hint_x: 0.2
        halign: 'right'
    GradientLegend:
        id: legend
        size_hint_x: 0.2
        color: root.color
    FieldLabel:
        id: max_value
        text: str(root.max_value)
        size_hint_x: 0.2
        halign: 'left'
        
<AnalysisMap>:
    options_enabled: True
    canvas.before:
        Color:
            rgba: ColorScheme.get_dark_background_translucent()
        Rectangle:
            pos: self.pos
            size: self.size

    Scatter:
        id: scatter
        auto_bring_to_front: False
        TrackMap:
            id: track
            height: root.height
            width: root.width

    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'top'
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (0.9, 1.0)
            AnchorLayout:
                id: top_bar
                size_hint_x: 0.75
                anchor_y: 'top'
                anchor_x: 'center'
                BoxLayout:
                    size_hint: (1.0, 0.1)
                    canvas.before:
                        Color:
                            rgba: ColorScheme.get_widget_translucent_background()
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    orientation: 'horizontal'
                    FieldLabel:
                        halign: 'center'
                        font_size: self.height * 0.8
                        id: track_name
            BoxLayout:
                id: legend_box
                orientation: 'vertical'
                size_hint_x: 0.25
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: 0.1
                    BoxLayout:
                        size_hint_x: 0.4
                    FieldLabel:
                        id: heat_channel_name
                        halign: 'center'
                        font_size: self.height * 0.8
                        size_hint_x: 0.6
                BoxLayout:
                    size_hint_y: 0.9
                    GridLayout:
                        cols: 1
                        id: legend_list
                        padding: (sp(5), sp(5))
                        row_default_height: root.height * 0.12
                        row_force_default: True
                        canvas.before:
                            Color:
                                rgba: ColorScheme.get_widget_translucent_background()
                            Rectangle:
                                pos: self.pos
                                size: self.size

<CustomizeMapView>:
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: 0.9
        orientation: 'horizontal'
        ScrollView:
            size_hint_x: 0.3
            id: scroller
            do_scroll_x:False
            do_scroll_y:True
            GridLayout:
                padding: (sp(10), sp(10))
                spacing: sp(10)
                id: options
                row_default_height: root.height * 0.12
                row_force_default: True
                size_hint_y: None
                height: max(self.minimum_height, scroller.height)
                cols: 1
        ScreenManager:
            id: screens
            size_hint_x: 0.7
    BoxLayout:
        size_hint_y: 0.1
        orientation: 'horizontal'
        IconButton:
            id: confirm
            disabled: True
            text: u'\uf00c'
            on_release: root.confirm()
        IconButton:
            color: ColorScheme.get_primary()
            id: go_back
            text: u'\uf00d'
            on_release: root.cancel()

<CustomizeTrackView>:
    BoxLayout:
        orientation: 'vertical'
        TracksBrowser:
            trackHeight: dp(200)
            multi_select: False
            id: track_browser
            size_hint_y: 0.90

<CustomizeHeatmapView>:
    BoxLayout:
        orientation: 'vertical'
        ChannelSelectorView:
            multi_select: False
            id: heatmap_channel
            size_hint_y: 0.9

<HeatmapButton>:
    title: 'Heat Map'
    icon_size: self.height * .9
    title_font_size: self.height * 0.6
    icon: u'\uf06d'


<TrackmapButton>:
    title: 'Track Map'
    icon_size: self.height * .9
    title_font_size: self.height * 0.6
    icon: u'\uf018'
